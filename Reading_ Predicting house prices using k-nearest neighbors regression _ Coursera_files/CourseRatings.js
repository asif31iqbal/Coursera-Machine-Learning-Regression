define("bundles/content-feedback/models/CourseRatings",["require","exports","module","underscore","bundles/content-feedback/constants/RatingValues","bundles/content-feedback/constants/LearnerAudiences","bundles/content-feedback/models/RatingCollection"],function(require,exports,module){"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var t=function(){function defineProperties(i,t){for(var n=0;n<t.length;n++){var e=t[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(i,e.key,e)}}return function(e,n,t){return n&&defineProperties(e.prototype,n),t&&defineProperties(e,t),e}}(),_=require("underscore"),e=require("bundles/content-feedback/constants/RatingValues"),n=require("bundles/content-feedback/constants/LearnerAudiences"),i=require("bundles/content-feedback/models/RatingCollection"),a=function(){function CourseRatings(){var t=this;_classCallCheck(this,CourseRatings),this.ratingValue=_(e).find(function(e){return-1===e.value}),this.learnerAudience=_(n).find(function(e){return"ALL_LEARNERS"===e.id}),this.statsMap={},this.reviewCollectionsMap={},_(n).each(function(s){var n=s.id,a={};_(e).each(function(e){a[e.value]=new i}),t.statsMap[n]=null,t.reviewCollectionsMap[n]=a})}return t(CourseRatings,[{key:"setRatingValue",value:function setRatingValue(e){this.ratingValue=e}},{key:"setLearnerAudience",value:function setLearnerAudience(e){this.learnerAudience=e}},{key:"appendReviews",value:function appendReviews(n,t){var e=this.reviewCollection;e.appendPage(n),e.setTotalCount(t)}},{key:"deleteReview",value:function deleteReview(e){_(this.reviewCollectionsMap).each(function(n){return _(n).each(function(n){n.models=_(n.models).filter(function(n){return n.id!==e})})})}},{key:"setStats",value:function setStats(e){this.statsMap[this.learnerAudience.id]=e}},{key:"reviewCollection",get:function get(){return this.reviewCollectionsMap[this.learnerAudience.id][this.ratingValue.value]}},{key:"stats",get:function get(){return this.statsMap[this.learnerAudience.id]}}]),CourseRatings}();module.exports=a});